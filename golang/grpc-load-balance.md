# grpc-load-banlance

负载均衡，是微服务离不开的话题，多服务端能够提供更强的服务处理能力，这时就需要将来自客户端的请求合理的打入到不同的服务端。  

### 机制
负载均衡非常的好理解，客户端拿到多个服务端的地址，一次拨号到所有的服务端，每次调用服务方法的时候依据策略来决定向哪个服务端发送请求。  
依照这个机制，实现者在这个过程中有两个需要做的：第一是怎么拿地址；第二是怎么配策略。  

### 注册中心或是其他
主流的声音总是提到注册中心，注册中心的好处在于将服务器地址的选择主动权把握在一个专门的地方，便于做各种其他的事情，例如：熔断，服务分块，灰度发布。但是，这取决于需求，注册中心能做的很多，但不是做的越多越好。  
能取代注册中心的简单方法还有很多，例如：nginx，它也能做到部分其他功能，但是能力相较于注册中心要弱，因为走了一层代理，流量不是直接打到服务端；固定配置，这应该是最简单的，有时候你需要的可能就是这个。

注册中心可以使用成熟的分布式存储系统，例如：etcd、zoomkeeper，这两者都是CP系统，也就是高一致，如果服务规模庞大，也有可能承受不住的，毕竟需要频繁的读写。如果对及时性不是那么敏感的业务，或许可以试试AP系统，毕竟服务变更不是很常见的事情，变更的时刻我们把控的力度会比平时更大。
### 常见策略
- 轮询（round_robin）  
- pick_first
